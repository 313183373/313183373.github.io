






<!doctype html>
<html lang="">
<head>
  <meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <meta name="author" content="Xion">
  
  
  
  
    <meta name="description" content="åœ¨ä¸Šä¸€å°èŠ‚æˆ‘ä»¬è¯´è¿‡ï¼Œæˆ‘ä»¬ç°åœ¨çš„å¤§éƒ¨åˆ†ç»„ä»¶éƒ½ä¸èƒ½å¤Ÿå¤ç”¨ï¼Œå› ä¸ºç”¨åˆ°äº†Contextï¼Œæˆ‘ä»¬ä¹Ÿè¯´äº†ä¸€ä¸ªè§£å†³æ–¹æ³•ï¼Œå°±æ˜¯æŠŠé€»è¾‘å’Œæ˜¾ç¤ºåˆ†ç¦»ï¼Œå…¶ä¸­ï¼Œå…³äºContextçš„éƒ½æ˜¯é€»è¾‘éƒ¨åˆ†ï¼Œæ¯”å¦‚ï¼šè·å–Contextï¼Œè·å–storeç„¶åè·å–stateï¼Œä½¿ç”¨store.dispatchï¼Œè¿™äº›éƒ½æ˜¯é€»è¾‘éƒ¨åˆ†ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠä»–ä»¬å’Œæˆ‘ä»¬çš„æ˜¾ç¤ºåˆ†å¼€ï¼Œæ˜¾ç¤ºå…¶å®å°±åªæœ‰renderæ–¹æ³•ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å¾—ä½¿ç”¨åˆ°é«˜é˜¶ç»„ä»¶ï¼Œé€»è¾‘éƒ¨åˆ†ç”¨é«˜é˜¶ç»„ä»¶æ¥åšï¼Œ...">
  
  <title>ä¼˜åŒ–Reduxä¸Reactç»“åˆ [ ç†Šé‘«çš„ç¾å¥½ç”Ÿæ´» ]</title>
  
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  
  <link rel="stylesheet" href="/css/random.css">
<link rel="stylesheet" href="/css/vegas.min.css">
<link rel="stylesheet" href="/css/highlight-railscasts.css">
<link rel="stylesheet" href="/css/jquery.fancybox.css">
<link rel="stylesheet" href="/css/iconfont/iconfont.css">
<link rel="stylesheet" href="/css/jquery.fancybox-thumbs.css">
<link rel="stylesheet" href="/css/plyr.css">
  
</head>

<body>
<div class="side-navigate hide-area">
  
  
    <div class="item next">
      <a href="/2018/08/22/Reduxä¸Reactç»“åˆ/">
        <div class="item-icon"></div>
      </a>
      <div class="item-title">
        Reduxä¸Reactç»“åˆ
      </div>
    </div>
  
</div>
<div id="outer-container" class="hide-area">
<div id="container">
  <div id="menu-outer" class="slide-down">
    <div id="menu-inner">
      <div id="brand">
        
        <a onClick="openUserCard()">
          <img id="avatar" src="https://ws1.sinaimg.cn/large/006tKfTcgy1ft9vmze9s2j30k00hfdh3.jpg"/>
          <div id="homelink">ç†Šé‘«çš„ç¾å¥½ç”Ÿæ´»</div>
        </a>
      </div>
      <div id="menu-list">
        <ul>
        
        
          
            <li>
          
            <a href="/">é¦–é¡µ</a>
            
          </li>
        
          
            <li>
          
            <a href="/archives">æ–‡ç« </a>
            
          </li>
        
          
            <li>
          
            <a href="/tags">æ ‡ç­¾</a>
            
          </li>
        
          
            <li>
          
            <a href="/categories">åˆ†ç±»</a>
            
          </li>
        
          
            <li>
          
            <a href="https://github.com/313183373">Github</a>
            
          </li>
        
        </ul>
      </div>
      <div id="show-menu">
        <button>Menu</button>
      </div>
    </div>
  </div>

  <div id="content-outer">
    <div id="content-inner">
      <div id="Jihuajiyi" style="display:none"></div>
      
      
  <article id="post">
    <h1>ä¼˜åŒ–Reduxä¸Reactç»“åˆ</h1>
    <p class="page-title-sub">
      <span id = "post-title-date">Created at 2018-08-24</span>
      
        <span id = "post-title-updated">Updated at 2018-08-24</span>
      
      
      
      <span id = "post-title-tags">
      Tag
      
      
        
        
        <a href="/tags/Redux/">Redux</a>
      
        
          /
        
        
        <a href="/tags/React/">React</a>
      
      </span>
      
    </p>
    
    <p>åœ¨ä¸Šä¸€å°èŠ‚æˆ‘ä»¬è¯´è¿‡ï¼Œæˆ‘ä»¬ç°åœ¨çš„å¤§éƒ¨åˆ†ç»„ä»¶éƒ½ä¸èƒ½å¤Ÿå¤ç”¨ï¼Œå› ä¸ºç”¨åˆ°äº†Contextï¼Œæˆ‘ä»¬ä¹Ÿè¯´äº†ä¸€ä¸ªè§£å†³æ–¹æ³•ï¼Œå°±æ˜¯æŠŠé€»è¾‘å’Œæ˜¾ç¤ºåˆ†ç¦»ï¼Œå…¶ä¸­ï¼Œå…³äºContextçš„éƒ½æ˜¯é€»è¾‘éƒ¨åˆ†ï¼Œæ¯”å¦‚ï¼šè·å–<code>Context</code>ï¼Œè·å–<code>store</code>ç„¶åè·å–<code>state</code>ï¼Œä½¿ç”¨<code>store.dispatch</code>ï¼Œè¿™äº›éƒ½æ˜¯é€»è¾‘éƒ¨åˆ†ï¼Œæˆ‘ä»¬åº”è¯¥æŠŠä»–ä»¬å’Œæˆ‘ä»¬çš„æ˜¾ç¤ºåˆ†å¼€ï¼Œæ˜¾ç¤ºå…¶å®å°±åªæœ‰<code>render</code>æ–¹æ³•ï¼Œé‚£ä¹ˆï¼Œæˆ‘ä»¬å¾—ä½¿ç”¨åˆ°é«˜é˜¶ç»„ä»¶ï¼Œé€»è¾‘éƒ¨åˆ†ç”¨é«˜é˜¶ç»„ä»¶æ¥åšï¼Œç„¶åæŠŠè·å–åˆ°çš„å€¼ï¼Œé€šè¿‡<code>props</code>ä¼ é€’ç»™æˆ‘ä»¬çš„æ˜¾ç¤ºç»„ä»¶ã€‚</p>
<p>é¡ºç€è¿™ä¸ªæ€è·¯ï¼Œæˆ‘ä»¬å¼€å§‹é‡æ„æˆ‘ä»¬çš„ä»£ç ã€‚</p>
<p>é¦–å…ˆæˆ‘ä»¬æ›´æ”¹ä¸€ä¸ªå°ç»„ä»¶Todoç»„ä»¶æ¥è¯•è¯•æ°´ï¼Œçœ‹çœ‹æˆ‘ä»¬çš„æ€è·¯å¯¹ä¸å¯¹</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Todo.js</span></span><br><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Todo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">        store: PropTypes.object.isRequired,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    handleClick = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;id&#125; = <span class="keyword">this</span>.props;</span><br><span class="line">        <span class="keyword">const</span> &#123;store&#125; = <span class="keyword">this</span>.context;</span><br><span class="line">        store.dispatch(&#123;</span><br><span class="line">            type:<span class="string">'TOGGLE_TODO'</span>,</span><br><span class="line">            id,</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;text, completed&#125; = <span class="keyword">this</span>.props;</span><br><span class="line">        <span class="keyword">const</span> style = &#123;<span class="attr">textDecoration</span>: completed ? <span class="string">'line-through'</span> : <span class="string">'none'</span>&#125;;</span><br><span class="line">        <span class="keyword">return</span> &lt;li style=&#123;style&#125; onClick=&#123;this.handleClick&#125;&gt;&#123;text&#125;&lt;/li&gt;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> Todo;</span><br></pre></td></tr></table></figure>
<p>æˆ‘ä»¬å…ˆåˆ†æä¸€ä¸‹æˆ‘ä»¬ç”¨åˆ°äº†å“ªäº›é€»è¾‘ï¼š</p>
<ol>
<li>è·å–<code>Context</code>ï¼Œä¸ºäº†ä½¿ç”¨<code>dispatch</code></li>
</ol>
<p>å°±åªæœ‰è¿™ä¹ˆä¸€ä¸ªé€»è¾‘ï¼Œæˆ‘ä»¬å†™ä¸€ä¸ªé«˜é˜¶ç»„ä»¶åŒ…è£…è¿™ä¸ªé€»è¾‘ï¼Œç„¶åæŠŠä½¿ç”¨è¿™ä¸ª<code>dispatch</code>çš„é€»è¾‘ç”¨æ–¹æ³•ä¼ é€’ç»™<code>Todo</code>ç»„ä»¶ã€‚</p>
<p>å…ˆæ”¹å†™è¿™ä¸ªTodoç»„ä»¶ï¼Œæ‰€æœ‰å®ƒéœ€è¦çš„ä¸œè¥¿éƒ½é€šè¿‡<code>props</code>ä¼ é€’è¿›æ¥ï¼ˆåŒ…æ‹¬è°ƒç”¨dispatchçš„å‡½æ•°ï¼‰ï¼Œè¿™æ ·çš„è¯ï¼Œ<code>Todo</code>ç»„ä»¶å°±å¯ä»¥å†™æˆä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶äº†ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Todo</span>(<span class="params">&#123;text, completed, onClick, id&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> style = &#123;<span class="attr">textDecoration</span>: completed ? <span class="string">'line-through'</span> : <span class="string">'none'</span>&#125;;</span><br><span class="line">    <span class="keyword">return</span> &lt;li style=&#123;style&#125; onClick=&#123;() =&gt; onClick(id)&#125;&gt;&#123;text&#125;&lt;/li&gt;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ç°åœ¨è¿™ä¸ªTodoç»„ä»¶æ¸…çˆ½å¤šäº†ï¼Œå¹¶ä¸”å¯ä»¥å¤ç”¨äº†ï¼Œç„¶åæˆ‘ä»¬å†™ä¸€å†™Todoçš„é«˜é˜¶ç»„ä»¶</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TodoWrapper</span>(<span class="params">Todo</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">        <span class="comment">// è·å–Contextå¿…å¤‡</span></span><br><span class="line">        <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">            store: PropTypes.object.isRequired,</span><br><span class="line">        &#125;;</span><br><span class="line">		<span class="comment">// å†™å¥½dispatchæ–¹æ³•ï¼Œä¼ é€’ç»™Todo</span></span><br><span class="line">        handleClick = <span class="function">(<span class="params">id</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;store&#125; = <span class="keyword">this</span>.context;</span><br><span class="line">            store.dispatch(&#123;</span><br><span class="line">                type: <span class="string">'TOGGLE_TODO'</span>,</span><br><span class="line">                id,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;;</span><br><span class="line">		<span class="comment">// æ¸²æŸ“Todoï¼Œä¼ é€’props</span></span><br><span class="line">        render() &#123;</span><br><span class="line">            <span class="keyword">return</span> &lt;Todo &#123;...this.props&#125; onClick=&#123;this.handleClick&#125;/&gt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default TodoWrapper;</span><br></pre></td></tr></table></figure>
<p>æ³¨æ„ä¸Šé¢renderçš„æ—¶å€™<code>{...this.props}</code>ï¼Œæˆ‘ä»¬éœ€è¦æŠŠä¼ é€’ç»™é«˜é˜¶ç»„ä»¶çš„<code>props</code>ï¼Œä¼ é€’ç»™çœŸæ­£çš„<code>Todo</code>ç»„ä»¶ï¼Œå› ä¸ºå¯¹å¤–æ¥è¯´ï¼Œ<code>Todo</code>ç»„ä»¶è¿˜æ˜¯é‚£ä¸ª<code>Todo</code>ç»„ä»¶ï¼Œä½†æ˜¯ç»è¿‡æˆ‘ä»¬æ”¹é€ ä¹‹åï¼Œå…¶å®æ˜¯ç”¨é«˜é˜¶ç»„ä»¶åŒ…èµ·æ¥çš„<code>Todo</code>ç»„ä»¶ï¼Œå¤–ç•Œä¼ é€’çš„<code>props</code>ä¼šè¢«é«˜é˜¶ç»„ä»¶æ¥æ”¶åˆ°ï¼Œå¦‚æœæˆ‘ä»¬ä¸ä¼ é€’ç»™<code>Todo</code>ç»„ä»¶ï¼Œå°±ä¸å¯¹äº†ã€‚</p>
<p>å°±æ˜¯è¿™æ ·ï¼Œé€»è¾‘ä¸æ˜¾ç¤ºå½»åº•åˆ†ç¦»ï¼Œç„¶åæˆ‘ä»¬çš„<code>Todo</code>ç»„ä»¶å…¶å®å¾—å…ˆè°ƒç”¨ä¸€ä¸‹<code>TodoWrapper</code>é«˜é˜¶ç»„ä»¶ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> TodoWrapper <span class="keyword">from</span> <span class="string">'./TodoWrapper'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Todo</span>(<span class="params">&#123;text, completed, onClick, id&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> style = &#123;<span class="attr">textDecoration</span>: completed ? <span class="string">'line-through'</span> : <span class="string">'none'</span>&#125;;</span><br><span class="line">    <span class="keyword">return</span> &lt;li style=&#123;style&#125; onClick=&#123;() =&gt; onClick(id)&#125;&gt;&#123;text&#125;&lt;/li&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> TodoWrapper(Todo);</span><br></pre></td></tr></table></figure>
<p>ä¼˜é›…æ— æ¯”ï¼Œå…¶ä»–åœ°æ–¹å®Œå…¨ä¸ç”¨æ”¹ï¼Œæˆ‘ä»¬æ¥çœ‹çœ‹æ˜¯ä¸æ˜¯èƒ½ç”¨çš„ã€‚</p>
<p><img src="https://ws1.sinaimg.cn/large/006tNbRwgy1fukm0b82k1g308h02j0u4.gif" alt="1"></p>
<p>æ²¡æœ‰é—®é¢˜ï¼Œæˆ‘ä»¬æ¥ç€ä¿®æ”¹å…¶ä»–çš„ç»„ä»¶ã€‚ä¸‹é¢æˆ‘ä»¬ä¿®æ”¹<code>VisibleLink</code>ç»„ä»¶ï¼Œå…ˆæŠŠå®ƒå†™æˆä¸€ä¸ªå‡½æ•°å¼ç»„ä»¶</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> VisibleLinkWrapper <span class="keyword">from</span> <span class="string">'./VisibleLinkWrapper'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">VisibleLink</span>(<span class="params">&#123;visible, storeVisible,onClick&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">const</span> style = &#123;<span class="attr">color</span>: visible === storeVisible ? <span class="string">'red'</span> : <span class="string">'black'</span>&#125;;</span><br><span class="line">    <span class="keyword">return</span> &lt;span style=&#123;style&#125; onClick=&#123;() =&gt; onClick(visible)&#125;&gt;&#123;visible&#125;&lt;/span&gt;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> VisibleLinkWrapper(VisibleLink);</span><br></pre></td></tr></table></figure>
<p>ç„¶åå†™ä¸€ä¸‹<code>VisibleLink</code>çš„é«˜é˜¶ç»„ä»¶</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">VisibleLinkWrapper</span>(<span class="params">VisibleLink</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">        <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">            store: PropTypes.object.isRequired,</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        handleClick = <span class="function">(<span class="params">visible</span>) =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;store&#125; = <span class="keyword">this</span>.context;</span><br><span class="line">            store.dispatch(&#123;</span><br><span class="line">                type: <span class="string">'SET_VISIBLE'</span>,</span><br><span class="line">                visible,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;store&#125; = <span class="keyword">this</span>.context;</span><br><span class="line">            <span class="keyword">const</span> &#123;<span class="attr">visible</span>: storeVisible&#125; = store.getState();</span><br><span class="line">            <span class="keyword">return</span> &lt;VisibleLink &#123;...this.props&#125; onClick=&#123;this.handleClick&#125; storeVisible=&#123;storeVisible&#125;/&gt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default VisibleLinkWrapper;</span><br></pre></td></tr></table></figure>
<p>å¥½äº†ï¼Œå…¶å®è·Ÿæˆ‘ä»¬æœ€å¼€å§‹å†™çš„<code>TodoWrapper</code>é«˜é˜¶ç»„ä»¶éå¸¸åƒã€‚ç›¸ä¿¡å¤§å®¶ä¹Ÿå¤§è‡´äº†è§£è¿™ç§æ¨¡å¼äº†ï¼Œæˆ‘ä»¬æŠŠå‰©ä¸‹çš„ç»„ä»¶å…¨éƒ¨éƒ½è¿™æ ·æ”¹é€ ä¸€ä¸‹ï¼Œä¸‹é¢æ¥çœ‹çœ‹<code>TodoList</code>ç»„ä»¶å¦‚ä½•æ”¹é€ ï¼Œè¿™ä¸ªç»„ä»¶æ¯”è¾ƒå¤§ï¼Œæˆ‘ä»¬å…ˆåˆ†æä¸€ä¸‹ã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"><span class="keyword">import</span> Todo <span class="keyword">from</span> <span class="string">"./Todo"</span>;</span><br><span class="line"><span class="keyword">import</span> VisibleLink <span class="keyword">from</span> <span class="string">'./VisibleLink'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TodoList</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¿™æ˜¯ä¸ºäº†é…åˆç›‘å¬å™¨è‡ªåŠ¨æ›´æ–°çš„ï¼Œå¯ä»¥æ”¾åˆ°é«˜é˜¶ç»„ä»¶ä¸­</span></span><br><span class="line">    state = &#123;</span><br><span class="line">        todos: [],</span><br><span class="line">        visible: <span class="string">''</span></span><br><span class="line">    &#125;;</span><br><span class="line">	<span class="comment">// è·å–Contextï¼Œæ”¾åˆ°é«˜é˜¶ç»„ä»¶ä¸­</span></span><br><span class="line">    <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">        store: PropTypes.object.isRequired,</span><br><span class="line">    &#125;;</span><br><span class="line">	<span class="comment">// åˆå§‹åŒ–å’Œæ³¨å†Œç›‘å¬å™¨ï¼Œæ”¾åˆ°é«˜é˜¶ç»„ä»¶ä¸­</span></span><br><span class="line">    componentDidMount() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;store&#125; = <span class="keyword">this</span>.context;</span><br><span class="line">        <span class="keyword">this</span>._updateTodoList();</span><br><span class="line">        store.subscribe(<span class="keyword">this</span>._updateTodoList);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">// æ›´æ–°ï¼Œæ”¾åˆ°é«˜é˜¶ç»„ä»¶ä¸­</span></span><br><span class="line">    _updateTodoList = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;store&#125; = <span class="keyword">this</span>.context;</span><br><span class="line">        <span class="keyword">const</span> state = store.getState();</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            todos: state.todo,</span><br><span class="line">            visible: state.visible,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;;</span><br><span class="line">	<span class="comment">// éœ€è¦è·å–Storeä¸­çš„todoså’Œvisible</span></span><br><span class="line">	<span class="comment">// å…¶å®visibleæ²¡æœ‰å¿…è¦è·å–äº†ï¼Œè¿™é‡Œç”¨å®ƒåªæ˜¯ç”¨æ¥filter todos</span></span><br><span class="line">	<span class="comment">// è¿™ä¸ªé€»è¾‘å¯ä»¥åœ¨é«˜é˜¶ç»„ä»¶ä¸­å¤„ç†</span></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;todos, visible&#125; = <span class="keyword">this</span>.state;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;VisibleLink visible=<span class="string">'ALL'</span>/&gt;&amp;nbsp;</span><br><span class="line">                &lt;VisibleLink visible=<span class="string">'COMPLETED'</span>/&gt;&amp;nbsp;</span><br><span class="line">                &lt;VisibleLink visible=<span class="string">'UNCOMPLETED'</span>/&gt;</span><br><span class="line">                &lt;ul&gt;</span><br><span class="line">                    &#123;todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span></span><br><span class="line">                        visible === <span class="string">'ALL'</span> ? <span class="literal">true</span> : visible === <span class="string">'COMPLETED'</span> ? todo.completed : !todo.completed)</span><br><span class="line">                        .map(<span class="function"><span class="params">todo</span> =&gt;</span> &lt;Todo &#123;...todo&#125; key=&#123;todo.id&#125;/&gt;)&#125;</span><br><span class="line">                &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> TodoList;</span><br></pre></td></tr></table></figure>
<p>åˆ†æä¹‹åï¼Œæˆ‘ä»¬è¿˜æ˜¯æŠŠå®ƒå˜æˆå‡½æ•°å¼ç»„ä»¶</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> Todo <span class="keyword">from</span> <span class="string">"./Todo"</span>;</span><br><span class="line"><span class="keyword">import</span> VisibleLink <span class="keyword">from</span> <span class="string">'./VisibleLink'</span>;</span><br><span class="line"><span class="keyword">import</span> TodoListWrapper <span class="keyword">from</span> <span class="string">'./TodoListWrapper'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TodoList</span>(<span class="params">&#123;todos&#125;</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (</span><br><span class="line">        &lt;div&gt;</span><br><span class="line">            &lt;VisibleLink visible=<span class="string">'ALL'</span>/&gt;&amp;nbsp;</span><br><span class="line">            &lt;VisibleLink visible=<span class="string">'COMPLETED'</span>/&gt;&amp;nbsp;</span><br><span class="line">            &lt;VisibleLink visible=<span class="string">'UNCOMPLETED'</span>/&gt;&amp;nbsp;</span><br><span class="line">            &lt;ul&gt;</span><br><span class="line">                &#123;todos.map(<span class="function"><span class="params">todo</span> =&gt;</span> &lt;Todo &#123;...todo&#125; key=&#123;todo.id&#125;/&gt;)&#125;</span><br><span class="line">            &lt;<span class="regexp">/ul&gt;</span></span><br><span class="line"><span class="regexp">        &lt;/</span>div&gt;</span><br><span class="line">    );</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> TodoListWrapper(TodoList);</span><br></pre></td></tr></table></figure>
<p>ç®€å•å¾—å¤šäº†ï¼Œç„¶åæˆ‘ä»¬çœ‹çœ‹TodoListçš„é«˜é˜¶ç»„ä»¶ï¼Œåˆšæ‰æˆ‘ä»¬åˆ†æä¹‹åï¼Œå¯ä»¥æŠŠå¾ˆå¤šä¸œè¥¿éƒ½æ”¾åˆ°é«˜é˜¶ç»„ä»¶</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">TodoListWrapper</span>(<span class="params">TodoList</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">		<span class="comment">// Contextå¿…å¤‡</span></span><br><span class="line">        <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">            store: PropTypes.object.isRequired,</span><br><span class="line">        &#125;;</span><br><span class="line">		<span class="comment">// åˆå§‹åŒ– stateï¼Œæ³¨å†Œç›‘å¬å™¨</span></span><br><span class="line">        componentWillMount() &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;store&#125; = <span class="keyword">this</span>.context;</span><br><span class="line">            <span class="keyword">this</span>._update();</span><br><span class="line">            store.subscribe(<span class="keyword">this</span>._update);</span><br><span class="line">        &#125;</span><br><span class="line">		<span class="comment">// æ›´æ–°state</span></span><br><span class="line">        _update = <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;store&#125; = <span class="keyword">this</span>.context;</span><br><span class="line">            <span class="keyword">const</span> &#123;<span class="attr">todo</span>: todos, visible&#125; = store.getState();</span><br><span class="line">            <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">                todos,</span><br><span class="line">                visible,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;;</span><br><span class="line">		<span class="comment">// ä»stateä¸­è·å–éœ€è¦çš„æ•°æ®ï¼Œé€šè¿‡propsä¼ é€’</span></span><br><span class="line">    	<span class="comment">// æå‰è¿‡æ»¤å¥½todosï¼Œè®©æ˜¾ç¤ºç»„ä»¶æ²¡éœ€è¦ä»»ä½•é€»è¾‘</span></span><br><span class="line">    	<span class="comment">// æ›´æ–°æ—¶è‡ªåŠ¨æ›´æ–°</span></span><br><span class="line">        render() &#123;</span><br><span class="line">            <span class="keyword">let</span> &#123;todos, visible&#125; = <span class="keyword">this</span>.state;</span><br><span class="line">            todos = todos.filter(<span class="function"><span class="params">todo</span> =&gt;</span> visible === <span class="string">'ALL'</span> ? <span class="literal">true</span> : visible === <span class="string">'COMPLETED'</span> ? todo.completed : !todo.completed);</span><br><span class="line">            <span class="keyword">return</span> &lt;TodoList &#123;...this.props&#125; todos=&#123;todos&#125;/&gt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default TodoListWrapper;</span><br></pre></td></tr></table></figure>
<p>è¿™ä¸ªé«˜é˜¶ç»„ä»¶è·Ÿæˆ‘ä»¬ä¹‹å‰å†™çš„æœ‰ä¸€ç‚¹ç‚¹ä¸ä¸€æ ·ï¼Œå°±æ˜¯è¿™é‡ŒæŠŠ<code>store</code>ä¸­çš„<code>state</code>ä½œä¸ºäº†é«˜é˜¶ç»„ä»¶çš„<code>state</code>ï¼Œç„¶åæ³¨å†Œäº†ç›‘å¬å™¨ï¼Œè¿™å…¶å®æ˜¯ä¸€ä¸ªå¾ˆæ™®éçš„ä¸€æ­¥ï¼Œä¹‹å‰é‚£äº›é«˜é˜¶ç»„ä»¶æ²¡æœ‰å†™æ˜¯å› ä¸ºè¿™é‡Œå†™äº†ï¼Œä¸€æ—¦è¿™ä¸ªå¤§çš„ç»„ä»¶æ›´æ–°ï¼Œé‚£ä¹ˆå®ƒé‡Œé¢çš„å­ç»„ä»¶éƒ½ä¼šæ›´æ–°ã€‚</p>
<p>å‰©ä¸‹è¿˜æœ‰ä¸€ä¸ª<code>AddTodo</code>ç»„ä»¶ï¼Œå·²ç»åšäº†è¿™ä¹ˆå¤šæ˜¾ç¤ºé€»è¾‘åˆ†ç¦»ä¹‹åï¼Œæˆ‘ä»¬å¾ˆç†Ÿç»ƒçš„æŠŠå®ƒå®Œæˆã€‚</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> AddTodoWrapper <span class="keyword">from</span> <span class="string">'./AddTodoWrapper'</span>;</span><br><span class="line"><span class="comment">// è¿™ä¸ªç»„ä»¶æ²¡æœ‰ä½¿ç”¨å‡½æ•°å¼ç»„ä»¶æ˜¯å› ä¸ºå®ƒå†…éƒ¨å…¶å®æ˜¯æœ‰stateçš„</span></span><br><span class="line"><span class="comment">// inputæ˜¯ä¸€ä¸ªæ”¶æ§ç»„ä»¶ï¼Œæ‰€ä»¥å¿…é¡»æœ‰state</span></span><br><span class="line"><span class="comment">// å½“ç„¶ä¹Ÿå¯ä»¥ä½¿ç”¨éå—æ§ç»„ä»¶ï¼Œä½¿å¾—è¿™ä¸ªç»„ä»¶ä¸ºå‡½æ•°å¼ç»„ä»¶</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AddTodo</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">    state = &#123;</span><br><span class="line">        text: <span class="string">''</span></span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    handleChange = <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.setState(&#123;</span><br><span class="line">            text: e.target.value,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    render() &#123;</span><br><span class="line">        <span class="keyword">const</span> &#123;handleClick&#125; = <span class="keyword">this</span>.props;</span><br><span class="line">        <span class="keyword">return</span> (</span><br><span class="line">            &lt;div&gt;</span><br><span class="line">                &lt;input type=<span class="string">"text"</span> value=&#123;<span class="keyword">this</span>.state.text&#125; onChange=&#123;<span class="keyword">this</span>.handleChange&#125;/&gt;</span><br><span class="line">                &lt;button onClick=&#123;() =&gt; &#123;</span><br><span class="line">                    handleClick(<span class="keyword">this</span>.state.text);</span><br><span class="line">                    <span class="keyword">this</span>.setState(&#123;<span class="attr">text</span>: <span class="string">''</span>&#125;)</span><br><span class="line">                &#125;&#125;&gt;æäº¤</span><br><span class="line">                &lt;<span class="regexp">/button&gt;</span></span><br><span class="line"><span class="regexp">            &lt;/</span>div&gt;</span><br><span class="line">        );</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> AddTodoWrapper(AddTodo);</span><br></pre></td></tr></table></figure>
<p>å®ƒçš„é«˜é˜¶ç»„ä»¶æ˜¯</p>
<figure class="highlight jsx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</span><br><span class="line"><span class="keyword">import</span> PropTypes <span class="keyword">from</span> <span class="string">'prop-types'</span>;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AddTodoWrapper</span>(<span class="params">AddTodo</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="class"><span class="keyword">class</span> <span class="keyword">extends</span> <span class="title">React</span>.<span class="title">Component</span> </span>&#123;</span><br><span class="line">        <span class="keyword">static</span> contextTypes = &#123;</span><br><span class="line">            store: PropTypes.object.isRequired,</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        handleClick = <span class="function"><span class="params">text</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">const</span> &#123;store&#125; = <span class="keyword">this</span>.context;</span><br><span class="line">            store.dispatch(&#123;</span><br><span class="line">                type: <span class="string">'ADD_TODO'</span>,</span><br><span class="line">                text,</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;;</span><br><span class="line"></span><br><span class="line">        render() &#123;</span><br><span class="line">            <span class="keyword">return</span> &lt;AddTodo &#123;...this.props&#125; handleClick=&#123;this.handleClick&#125;/&gt;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">export default AddTodoWrapper;</span><br></pre></td></tr></table></figure>
<p>å°±æ˜¯è¿™æ ·å•¦ï¼Œå¥½å•¦ï¼Œæˆ‘ä»¬ç°åœ¨å·²ç»å®Œå…¨æŠŠæ˜¾ç¤ºå’Œé€»è¾‘åˆ†ç¦»äº†ï¼Œæˆ‘ä»¬ç°åœ¨æ‰€æœ‰çš„æ˜¾ç¤ºç»„ä»¶éƒ½çœ‹ä¸å‡ºæ¥å’ŒContextæœ‰ä»»ä½•è”ç³»ï¼Œç„¶åå®ƒä»¬éƒ½èƒ½å¤Ÿåœ¨åˆ«çš„åœ°æ–¹ç»§ç»­ä½¿ç”¨ï¼Œè€Œä¸ä¾èµ–äºContextã€‚</p>
<p>è¿˜æœ‰ä»€ä¹ˆä¸å¥½çš„åœ°æ–¹å—ï¼Ÿå¦‚æœæ˜¯ä¸€è·¯éƒ½ä¸€æ­¥ä¸€æ­¥æ‰“ä»£ç è·Ÿç€çš„åŒå­¦ï¼Œåº”è¯¥ä¼šå‘ç°æˆ‘ä»¬å†™é«˜é˜¶ç»„ä»¶çš„æ—¶å€™å…¶å®æ˜¯éå¸¸çš„ç›¸ä¼¼çš„ï¼Œé«˜é˜¶ç»„ä»¶å­˜åœ¨å¾ˆå¤šç›¸ä¼¼çš„ä»£ç ï¼Œé‡å¤æ˜¯æœ€ä¸å¥½çš„ï¼Œè¿™å¾ˆå½±å“æˆ‘ä»¬å†™ä»£ç çš„ä½“éªŒã€‚æ‰€ä»¥æˆ‘ä»¬ä¸‹ä¸€å°èŠ‚çœ‹çœ‹å¦‚ä½•æŠ½å–å‡ºé«˜é˜¶ç»„ä»¶ä¸­çš„é‡å¤é€»è¾‘ï¼Œå†™ä¸€ä¸ªæ›´åŠ é€šç”¨çš„é«˜é˜¶ç»„ä»¶ã€‚åŒå­¦ä»¬å¯ä»¥å…ˆä»”ç»†æ€è€ƒä¸€ä¸‹ğŸ¤”ã€‚</p>

  </article>
  <div class="random-toc-area">
  <button class="btn-hide-toc btn-hide-toc-show" style="display: none" onclick="TOCToggle()">Show TOC</button>
  <button class="btn-hide-toc btn-hide-toc-hide" onclick="TOCToggle()">Hide TOC</button>
  <div class="random-toc">
    <h2>Table of Content</h2>
    
  </div>
</div>

  
<nav id="pagination">
  

  

  
    <a href="/2018/08/22/Reduxä¸Reactç»“åˆ/" class="next">Next post Reduxä¸Reactç»“åˆ &rarr;</a>
  
</nav>

  <!-- JiaThis Button BEGIN -->

<!-- JiaThis Button END -->


      
      
      
      <!-- æ¥å¿…åŠ›Cityç‰ˆå®‰è£…ä»£ç  -->
<div id="lv-container" data-id="city" data-uid="MTAyMC8zODM1Ny8xNDg4NQ==">
	<script type="text/javascript">
   (function(d, s) {
       var j, e = d.getElementsByTagName(s)[0];

       if (typeof LivereTower === 'function') { return; }

       j = d.createElement(s);
       j.src = 'https://cdn-city.livere.com/js/embed.dist.js';
       j.async = true;

       e.parentNode.insertBefore(j, e);
   })(document, 'script');
	</script>
<noscript> ä¸ºæ­£å¸¸ä½¿ç”¨æ¥å¿…åŠ›è¯„è®ºåŠŸèƒ½è¯·æ¿€æ´»JavaScript</noscript>
</div>
<!-- Cityç‰ˆå®‰è£…ä»£ç å·²å®Œæˆ -->
      
      <script src="http://open.iciba.com/huaci/huaci.js" ></script>
    </div>
  </div>
</div>

</div>


<div id="user-card">
  <div class="center-field">
    <img class="avatar" src="https://ws1.sinaimg.cn/large/006tKfTcgy1ft9vmze9s2j30k00hfdh3.jpg">
    <p id="description"></p>
    <ul class="social-icon">
  
  
</ul>
  </div>
</div>


<div id="btn-view">Hide</div>

<script>
// is trigger analytics / tongji script
var isIgnoreHost = false;

if(window && window.location && window.location.host) {
  isIgnoreHost = ["localhost","127.0.0.1"].some(function(address){
    return 0 === window.location.host.indexOf(address);
  });
}

var isTriggerAnalytics = !( true && isIgnoreHost );

</script>




  
  
    <script src="/js/jquery-2.2.3.min.js"></script>
  
    <script src="/js/vegas.min.js"></script>
  
    <script src="/js/random.js"></script>
  
    <script src="/js/highlight.pack.js"></script>
  
    <script src="/js/jquery.mousewheel.pack.js"></script>
  
    <script src="/js/jquery.fancybox.pack.js"></script>
  
    <script src="/js/jquery.fancybox-thumbs.js"></script>
  
    <script src="/js/plyr.js"></script>
  

<script>

  // fancybox
  var backgroundImages = [];
  
  $('#post').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox') || $(this).parent().hasClass('fancybox-thumb')) return;
      var alt = this.alt || this.title;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'post' + i);
    });
  });
  $(".fancybox").fancybox();

var vegasConfig = {"animation":"random","preloadÂ­Image":true,"transition":["slideLeft2","slideRight2","zoomIn","swirLeft","swirRight","flash","flash2"],"timer":true,"delay":5000,"shuffle":true,"count":10};
var unsplashConfig = {"gravity":"north"};
// is show background images
var turnoffBackgroundImage = false;



  turnoffBackgroundImage = true;


var backgroundColor = "34495E";

$(".fancybox-thumb").fancybox({
  prevEffect: 'none',
  nextEffect: 'none',
  helpers: {
    title: {
      type: 'outside'
    },
    thumbs: {
      width: 50,
      height: 50
    }
  }
});

// show video with plyr
$(".video-container iframe").each(function(i){
  var url = $(this).attr('src');
  var id = url.split('/').pop();
  var plyrContainer = document.createElement('div');
  plyrContainer.className = 'plyr';
  var plyrElement = document.createElement('div');
  plyrElement.dataset.videoId = id;
  switch(true) {
    case url.search('youtube.com') >= 0:
      plyrElement.dataset.type = 'youtube';
      break;
    case url.search('vimeo.com') >= 0:
      plyrElement.dataset.type = 'vimeo';
      break;
    default:
      return;
  };
  plyrContainer.appendChild(plyrElement);
  $(this).parent().html(plyrContainer);
});
plyr.setup('.plyr', {iconUrl: '/css/sprite.svg'});
</script>
</body>
</html>

